# КОМПОНЕНТЫ KUBERNETES

## Задания

### Задание. Необходимо определить требуемые ресурсы

Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения. 
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий. 
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

### Ответ

#### Расчет нагрузки

1. Управляющие узлы: рекомендуется 3 узла с параметрами, лостаточными для работы etcd и kube-controller-manager: 2 ГБ ОЗУ, 2 ядра

2. База данных: 3 узла (по 1й копии на каждом) 4 ГБ ОЗУ, 1 ядро + системные ресурсы + резерв 30% = 8 ГБ ОЗУ, 3 ядра.

3. Кеш:  3 узла (по 1й копии на каждом) 4 ГБ ОЗУ, 1 ядро + системные ресурсы + резерв 30% = 8 ГБ ОЗУ, 3 ядра.

4. Фронтенд: 5 узлов (по 1й копии на каждом) 50 МБ ОЗУ, 0.2 ядра - можно запускать на любых узлах из п.2 и п.3.
  
5. Бекенд: 10 узлов (по 1й копии на каждом) 600 МБ ОЗУ, 1 ядро - можно запускать как на отдельных, так и на узлах из п.2 и п.3. Во втором случае необходимо добавить к узлам еще + 1 ГБ и +1 ядро

6. Резервные узлы - для того, чтобы запускать поды с вышедших из строя узлов - 4 шт. 

#### Результат - описание кластера

Для создания высокодоступного отказоустойчивого кластера необходимо:

1. Узлы управления (Master Nodes) - 3 шт. в составе:

   - 2 ГБ ОЗУ, 2 ядра, 50 ГБ HDD
   - ОС: Ubuntu 20.04
   - система контейнеризации: containerd

2. Рабочие узлы (Workers) - 10 шт. в составе
   - 8 ГБ ОЗУ, 4 ядра, 100 ГБ SSD
   - ОС: Ubuntu 20.04
   - система контейнеризации: containerd


------

## Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

[Considerations for large clusters](https://kubernetes.io/docs/setup/best-practices/cluster-large/),

[Architecting Kubernetes clusters — choosing a worker node size](https://learnk8s.io/kubernetes-node-size).



------

# Задание

[https://github.com/netology-code/kuber-homeworks/blob/main/3.1/3.1.md](https://github.com/netology-code/kuber-homeworks/blob/main/3.1/3.1.md)
